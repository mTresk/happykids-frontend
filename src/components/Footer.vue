<template>
	<div class="footer">
		<div class="footer__container">
			<div class="footer__body">
				<router-link :to="{ name: 'home' }" class="footer__logo">
					<img src="@/assets/img/icons/logo.svg" alt="" />
				</router-link>
				<div class="footer__info">
					<div class="footer__copyright">Â© 2020-{{ year }}. {{ settings.site_name }}</div>
					<div class="footer__inn">{{ settings.inn }}</div>
					<div class="footer__developer">
						Developed by
						<a href="https://t.me/tresk">Maxim Tresk</a>
					</div>
				</div>
				<div class="footer__socials">
					<a :href="`tel:+${phone_digits}`" class="footer__social">
						<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="20" cy="20" r="20" fill="#B85E65" />
							<path
								d="M25.1204 18.7151L28.5915 15.708C28.9915 15.3613 28.9897 14.7258 28.5861 14.3231L26.1088 11.8502C25.3719 11.1142 24.2777 10.9035 23.4004 11.3293C18.1337 13.873 13.8803 18.1205 11.3292 23.3835C10.9035 24.26 11.1141 25.3533 11.851 26.0893L14.3515 28.5853C14.7559 28.9898 15.395 28.9906 15.7417 28.5871L18.7328 25.1026C19.0457 24.7382 19.0048 24.172 18.6386 23.8066L17.4244 22.5942C17.3593 22.5321 17.3164 22.4504 17.3023 22.3616C17.2882 22.2728 17.3036 22.1818 17.3461 22.1026C18.4874 20.1208 20.1335 18.4769 22.1168 17.3382C22.1961 17.2956 22.2873 17.2801 22.3762 17.2942C22.4652 17.3084 22.547 17.3513 22.6092 17.4164L23.819 18.6253C24.187 18.9915 24.7559 19.0315 25.1212 18.7151H25.1204Z"
								stroke="#e3af7b"
								stroke-width="2"
								stroke-linecap="round"
								stroke-linejoin="round"
							/>
						</svg>
					</a>
					<a :href="settings.telegram" class="footer__social">
						<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								fill-rule="evenodd"
								clip-rule="evenodd"
								d="M40 20C40 31.045 31.045 40 20 40C8.955 40 0 31.045 0 20C0 8.955 8.955 0 20 0C31.045 0 40 8.955 40 20ZM20.7167 14.765C18.7717 15.5733 14.8833 17.2483 9.05333 19.7883C8.10667 20.165 7.61 20.5333 7.565 20.8933C7.48833 21.5033 8.25167 21.7433 9.28833 22.0683C9.43 22.1133 9.57667 22.1583 9.72667 22.2083C10.7483 22.54 12.1217 22.9283 12.835 22.9433C13.4833 22.9567 14.2067 22.69 15.005 22.1433C20.4517 18.465 23.2633 16.6067 23.44 16.5667C23.565 16.5383 23.7383 16.5017 23.855 16.6067C23.9717 16.71 23.96 16.9067 23.9483 16.96C23.8717 17.2817 20.8817 20.0633 19.3317 21.5033C18.8483 21.9517 18.5067 22.27 18.4367 22.3433C18.28 22.505 18.12 22.66 17.9667 22.8083C17.0167 23.7217 16.3067 24.4083 18.0067 25.5283C18.8233 26.0667 19.4767 26.5117 20.1283 26.955C20.84 27.44 21.55 27.9233 22.47 28.5267C22.7033 28.68 22.9267 28.8383 23.145 28.9933C23.9733 29.585 24.7183 30.115 25.6383 30.0317C26.1717 29.9817 26.725 29.48 27.005 27.9817C27.6667 24.4383 28.97 16.765 29.2717 13.6017C29.29 13.339 29.2788 13.0751 29.2383 12.815C29.2141 12.6049 29.1118 12.4116 28.9517 12.2733C28.7133 12.0783 28.3433 12.0367 28.1767 12.04C27.425 12.0533 26.2717 12.455 20.7167 14.765V14.765Z"
								fill="#B85E65"
							/>
						</svg>
					</a>
					<a :href="settings.whatsapp" class="footer__social">
						<svg width="41" height="40" viewBox="0 0 41 40" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								d="M37.1108 9.24976C31.1108 -0.000305774 18.8607 -2.75033 9.36061 2.99972C0.110533 8.74976 -2.88949 21.2499 3.11056 30.4999L3.61056 31.2499L1.61055 38.75L9.1106 36.75L9.86061 37.25C13.1106 39 16.6107 40 20.1107 40C23.8607 40 27.6107 39 30.8608 37C40.1108 30.9999 42.8609 18.7498 37.1108 9.24976V9.24976ZM31.8608 28.4999C30.8608 29.9999 29.6108 30.9999 27.8607 31.2499C26.8607 31.2499 25.6107 31.7499 20.6107 29.7499C16.3607 27.7499 12.8606 24.4999 10.3606 20.7499C8.8606 18.9998 8.1106 16.7498 7.86059 14.4998C7.86059 12.4998 8.6106 10.7498 9.86061 9.49977C10.3606 8.99976 10.8606 8.74976 11.3606 8.74976H12.6106C13.1106 8.74976 13.6106 8.74976 13.8606 9.74977C14.3606 10.9998 15.6107 13.9998 15.6107 14.2498C15.8607 14.4998 15.8607 14.9998 15.6107 15.2498C15.8607 15.7498 15.6107 16.2498 15.3607 16.4998C15.1107 16.7498 14.8606 17.2498 14.6106 17.4998C14.1106 17.7498 13.8606 18.2498 14.1106 18.7498C15.1106 20.2498 16.3607 21.7499 17.6107 22.9999C19.1107 24.2499 20.6107 25.2499 22.3607 25.9999C22.8607 26.2499 23.3607 26.2499 23.6107 25.7499C23.8607 25.2499 25.1107 23.9999 25.6107 23.4999C26.1107 22.9999 26.3607 22.9999 26.8607 23.2499L30.8608 25.2499C31.3608 25.4999 31.8608 25.7499 32.1108 25.9999C32.3608 26.7499 32.3608 27.7499 31.8608 28.4999V28.4999Z"
								fill="#B85E65"
							/>
						</svg>
					</a>
					<a :href="settings.vk" class="footer__social">
						<svg width="41" height="40" viewBox="0 0 41 40" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path
								d="M20.1104 0C9.06452 0 0.110352 8.95417 0.110352 20C0.110352 31.0458 9.06452 40 20.1104 40C31.1562 40 40.1104 31.0458 40.1104 20C40.1104 8.95417 31.1562 0 20.1104 0ZM27.802 22.5646C27.802 22.5646 29.5708 24.3104 30.0062 25.1208C30.0187 25.1375 30.0249 25.1542 30.0291 25.1625C30.2062 25.4604 30.2479 25.6917 30.1604 25.8646C30.0145 26.1521 29.5145 26.2938 29.3437 26.3063H26.2187C26.002 26.3063 25.5479 26.25 24.9979 25.8708C24.5749 25.575 24.1583 25.0896 23.752 24.6167C23.1458 23.9125 22.6208 23.3042 22.0916 23.3042C22.0244 23.3041 21.9576 23.3146 21.8937 23.3354C21.4937 23.4646 20.9812 24.0354 20.9812 25.5562C20.9812 26.0312 20.6062 26.3042 20.3416 26.3042H18.9104C18.4229 26.3042 15.8833 26.1333 13.6333 23.7604C10.8791 20.8542 8.39993 15.025 8.3791 14.9708C8.22285 14.5937 8.54577 14.3917 8.89785 14.3917H12.0541C12.4749 14.3917 12.6124 14.6479 12.7083 14.875C12.8208 15.1396 13.2333 16.1917 13.9104 17.375C15.0083 19.3042 15.6812 20.0875 16.2208 20.0875C16.3219 20.0863 16.4213 20.0606 16.5104 20.0125C17.2145 19.6208 17.0833 17.1104 17.052 16.5896C17.052 16.4917 17.0499 15.4667 16.6895 14.975C16.4312 14.6187 15.9916 14.4833 15.7249 14.4333C15.8329 14.2844 15.9751 14.1636 16.1395 14.0812C16.6229 13.8396 17.4937 13.8042 18.3583 13.8042H18.8395C19.777 13.8167 20.0187 13.8771 20.3583 13.9625C21.0458 14.1271 21.0604 14.5708 20.9999 16.0896C20.9812 16.5208 20.9624 17.0083 20.9624 17.5833C20.9624 17.7083 20.9562 17.8417 20.9562 17.9833C20.9354 18.7562 20.9104 19.6333 21.4562 19.9937C21.5274 20.0384 21.6097 20.0622 21.6937 20.0625C21.8833 20.0625 22.4541 20.0625 23.9999 17.4104C24.4767 16.5568 24.891 15.6697 25.2395 14.7562C25.2708 14.7021 25.3624 14.5354 25.4708 14.4708C25.5507 14.4301 25.6394 14.4093 25.7291 14.4104H29.4395C29.8437 14.4104 30.1208 14.4708 30.1729 14.6271C30.2645 14.875 30.1562 15.6312 28.4624 17.925L27.7062 18.9229C26.1708 20.9354 26.1708 21.0375 27.802 22.5646V22.5646Z"
								fill="#B85E65"
							/>
						</svg>
					</a>
				</div>
			</div>
		</div>
		<div ref="topbutton" class="topbutton">
			<i class="_icon-up"><span></span></i>
		</div>
	</div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'
import { useStore } from 'vuex'

const store = useStore()

const getSettings = store.dispatch('getSettings')
const settings = computed(() => store.getters.settings)
const phone_digits = computed(() => store.getters.phone_digits)
const topbutton = ref('')

const year = ref('')
const getYear = () => {
	let today = new Date()
	year.value = today.getFullYear()
}

const topButton = () => {
	let goTopBtn = topbutton.value
	function trackScroll() {
		let scrolled = window.pageYOffset
		let coords = document.documentElement.clientHeight
		if (scrolled > coords) {
			goTopBtn.classList.add('_active')
		}
		if (scrolled < coords) {
			goTopBtn.classList.remove('_active')
		}
	}
	function backToTop() {
		if (window.pageYOffset > 0) {
			window.scrollBy(0, -80)
			setTimeout(backToTop, 6)
		}
	}
	window.addEventListener('scroll', trackScroll)
	goTopBtn.addEventListener('click', backToTop)
}

onMounted(() => {
	getYear()
	topButton()
})
</script>
